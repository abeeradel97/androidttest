define(["require","exports","tslib","external/prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/constants/file_viewer","modules/clean/react/extensions/data/store","modules/clean/integrations/zoom_share_dialog/async_modal","modules/clean/react/file_viewer/files2_utils"],function(e,t,i,r,n,o,s,a,l,d,u,c,_,p,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),n=i.__importDefault(n);var f=(function(t){function f(e){var i=t.call(this,e)||this,r=d.Viewer.get_viewer(),n=e.userId?r.get_user_by_id(e.userId):r.work_user||r.personal_user;i.state={user:n},c.log_js_modules_application_code_start();var o=e.file,s=u.getStoreForFileViewer();return u.hydrateFileViewerNamespace(s,{file:o},n),n&&p.initializeStore(n,[o]),i}return i.__extends(f,t),f.prototype.componentDidMount=function(){var t=this,r=this.props,s=r.shareEmail,d=r.file;if(s&&this.state.user)new Promise(function(t,i){e(["modules/clean/react/browse/models"],t,i)}).then(i.__importStar).then(function(e){var i=e.File;l.asyncShowPrefilledShareModal({user:t.state.user,sharePrefillEmails:[s],content:new i(t.props.file)})});else if(_.SHARED_LINK_REACT_AUTH_MODAL&&this.props.authModalKind===o.LoginOrRegisterKind.IMMEDIATE&&!this.state.user){var u=function(){return i.__awaiter(t,void 0,void 0,function(){var t,r,s;return i.__generator(this,function(a){switch(a.label){case 0:return[4,Promise.all([new Promise(function(t,i){e(["modules/clean/react/modal"],t,i)}).then(i.__importStar),new Promise(function(t,i){e(["modules/clean/auth/login_or_register/modal"],t,i)}).then(i.__importStar)])];case 1:return t=a.sent(),r=t[0].Modal,s=t[1].LoginOrRegisterModal,r.showInstance(n.default.createElement(s,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:o.Mode.REGISTER,kind:o.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register",showAppleLogin:!1})),[2]}})})};u()}else this.props.presentInZoom&&this.state.user&&m.asyncShowModal(this.state.user.id,d.file_id,"file-viewer-modal-overlay","desktop");if(this.props.openImmediatelyInApp){var c=this.props.file;a.openImmediately(c.open_in_app_data)}},f.prototype.render=function(){var e=this.props,t=e.fileViewerProps,r=e.onCloseUrl,o=e.isEmbedded,a=e.sharedLinkInfo,l=e.shareToken,d=e.sharePermission,u=n.default.createElement(s.FileViewer,i.__assign({},t,{fileCount:1,fileIndex:0,titleBarCloseUrl:r,sharedLinkInfo:a,shareToken:l,sharePermission:d,user:this.state.user,transparentBackground:!h.isFiles2M3Enabled()}));return o?n.default.createElement("div",{className:"embedded"},u):u},f.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},f.childContextTypes={authModalKind:r.default.oneOf(["download","immediate",null])},f})(n.default.Component);t.FileViewerContainer=f});
//# sourceMappingURL=container.min.js-vflJfUv9v.map